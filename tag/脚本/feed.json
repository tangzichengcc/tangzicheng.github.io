{
    "version": "https://jsonfeed.org/version/1",
    "title": "唐仔橙 • All posts by \"脚本\" tag",
    "description": "喜欢探索世界,在读研究生,计算机爱好者的成长记录",
    "home_page_url": "https://tangzichengcc.github.io",
    "items": [
        {
            "id": "https://tangzichengcc.github.io/pwn%E5%85%A5%E9%97%A8-43-pwn%E5%81%9A%E9%A2%98%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%84%9A%E6%9C%AC/",
            "url": "https://tangzichengcc.github.io/pwn%E5%85%A5%E9%97%A8-43-pwn%E5%81%9A%E9%A2%98%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E8%84%9A%E6%9C%AC/",
            "title": "pwn入门-43-pwn做题环境搭建脚本",
            "date_published": "2023-10-04T12:56:34.000Z",
            "content_html": "<p>​\t\t之前m1不支持x86,一直用云服务器有时候经常换,每次都需要手动搭建环境,一直想写个脚本,但有时候一直懒…终于整理出来了..</p>\n<p><font color=\"red\">(感谢chatgpt)</font></p>\n<p>​\t\t然后这个脚本目前还有很多小问题和可以改进的地方</p>\n<h2 id=\"要安装的内容\"><a href=\"#要安装的内容\" class=\"headerlink\" title=\"要安装的内容\"></a>要安装的内容</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 必要的安装</span></span><br><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install python3 python3-pip python3-dev git libssl-dev libffi-dev build-essential</span><br><span class=\"line\"><span class=\"comment\"># 安装常用工具</span></span><br><span class=\"line\">sudo apt install -y git vim gdb strace ltrace  socat netcat</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装pwntools</span></span><br><span class=\"line\">python3 -m pip install --upgrade pip</span><br><span class=\"line\">python3 -m pip install --upgrade pwntools</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装pwndbg</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/pwndbg/pwndbg</span><br><span class=\"line\"><span class=\"built_in\">cd</span> pwndbg</span><br><span class=\"line\">sudo ./setup.sh</span><br><span class=\"line\"><span class=\"built_in\">echo</span> <span class=\"string\">&quot;source /ctfpwntools/pwndbg/gdbinit.py&quot;</span> &gt;&gt; ~/.gdbinit</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装glibc-all-in-one</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/matrix1001/glibc-all-in-one.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> glibc-all-in-one/</span><br><span class=\"line\">python3 update_list</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装ROPgadget</span></span><br><span class=\"line\">pip install capstone</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/JonathanSalwan/ROPgadget.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ROPgadget</span><br><span class=\"line\">sudo python3 setup.py install</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># one_gadget</span></span><br><span class=\"line\">apt -y install ruby</span><br><span class=\"line\">gem install one_gadget </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># LibcSearcher</span></span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/lieanu/LibcSearcher.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> LibcSearcher</span><br><span class=\"line\">python3 setup.py develop</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># patchelf</span></span><br><span class=\"line\">apt-get install autoconf automake libtool</span><br><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/NixOS/patchelf.git</span><br><span class=\"line\"><span class=\"built_in\">cd</span> patchelf</span><br><span class=\"line\">./bootstrap.sh </span><br><span class=\"line\">./configure</span><br><span class=\"line\">make</span><br><span class=\"line\">make check</span><br><span class=\"line\">make install</span><br><span class=\"line\"><span class=\"built_in\">cd</span> ..</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##  seccomp</span></span><br><span class=\"line\"><span class=\"comment\"># 1.添加仓库</span></span><br><span class=\"line\">  sudo add-apt-repository ppa:brightbox/ruby-ng</span><br><span class=\"line\">  sudo apt-get update</span><br><span class=\"line\"><span class=\"comment\"># 2.指定安装 ruby 2.6 版本</span></span><br><span class=\"line\">  sudo apt-get install ruby2.6 ruby2.6-dev </span><br><span class=\"line\"><span class=\"comment\"># 3.然后安装 seccomp-tools</span></span><br><span class=\"line\">  sudo gem install seccomp-tools</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 32位libc</span></span><br><span class=\"line\">dpkg --add-architecture i386</span><br><span class=\"line\">apt-get install libc6:i386</span><br><span class=\"line\">apt-get install libgtk2.0-0:i386</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"简单的开始\"><a href=\"#简单的开始\" class=\"headerlink\" title=\"简单的开始\"></a>简单的开始</h2><p>​\t\t简单的创建while循环,指定安装次数</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#! /bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /ctfpwntools</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /ctfpwntools</span><br><span class=\"line\"></span><br><span class=\"line\">MAX_RETRIES=3</span><br><span class=\"line\">INSTALL_SUCCESS=<span class=\"literal\">false</span></span><br><span class=\"line\">RETRY_COUNT=0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新apt源</span></span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\"><span class=\"comment\"># 安装常用工具</span></span><br><span class=\"line\">sudo apt install -y git vim gdb strace ltrace nmap socat netcat</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装pwntools</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">while</span> [ <span class=\"variable\">$RETRY_COUNT</span> -lt <span class=\"variable\">$MAX_RETRIES</span> ] &amp;&amp; [ <span class=\"string\">&quot;<span class=\"variable\">$INSTALL_SUCCESS</span>&quot;</span> = <span class=\"literal\">false</span> ]</span><br><span class=\"line\"><span class=\"keyword\">do</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Attempt <span class=\"subst\">$((RETRY_COUNT+1)</span>) to install pwntools...&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\">    apt-get install -y python3 python3-pip python3-dev git libssl-dev libffi-dev build-essential</span><br><span class=\"line\">    python3 -m pip install --upgrade pip</span><br><span class=\"line\">    python3 -m pip install --upgrade pwntools</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 检查安装是否成功</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> [ $? -eq 0 ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">        INSTALL_SUCCESS=<span class=\"literal\">true</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span></span><br><span class=\"line\">        RETRY_COUNT=$((RETRY_COUNT+<span class=\"number\">1</span>))</span><br><span class=\"line\">    <span class=\"keyword\">fi</span></span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> [ <span class=\"string\">&quot;<span class=\"variable\">$INSTALL_SUCCESS</span>&quot;</span> = <span class=\"literal\">true</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;pwntools installed successfully!&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">else</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Failed to install pwntools after <span class=\"variable\">$MAX_RETRIES</span> attempts.&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">fi</span></span><br><span class=\"line\"></span><br><span class=\"line\">MAX_RETRIES=3</span><br><span class=\"line\">INSTALL_SUCCESS=<span class=\"literal\">false</span></span><br><span class=\"line\">RETRY_COUNT=0</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装pwndbg</span></span><br><span class=\"line\"><span class=\"keyword\">while</span>....</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"另外一种方式\"><a href=\"#另外一种方式\" class=\"headerlink\" title=\"另外一种方式\"></a>另外一种方式</h2><p>​\t\t只需要定义一个变量, 而且代码量少了很多</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义变量</span></span><br><span class=\"line\">MAX_RETRY=3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新apt源</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> sudo apt update; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;更新apt源时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;更新apt源失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装常用工具</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> xxxxxxxxxxx; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装常用工具时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装常用工具失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"定好模版\"><a href=\"#定好模版\" class=\"headerlink\" title=\"定好模版\"></a>定好模版</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义变量</span></span><br><span class=\"line\">MAX_RETRY=3</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装常用工具</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> xxxxxxxxxxx; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装常用工具时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装常用工具失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"套上\"><a href=\"#套上\" class=\"headerlink\" title=\"套上!\"></a>套上!</h2><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#! /bin/bash</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">mkdir</span> /ctfpwntools</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /ctfpwntools</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 定义变量</span></span><br><span class=\"line\">MAX_RETRY=3</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 必要的更新、安装常用工具</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (apt-get update;apt-get -y install python3 python3-pip python3-dev git libssl-dev libffi-dev build-essential git vim gdb strace ltrace  socat netcat); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;更新、安装常用工具时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;更新、安装常用工具失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装pwntools</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (python3 -m pip install --upgrade pip;python3 -m pip install --upgrade pwntools); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装pwntools时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装pwntools失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装pwndbg</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (git <span class=\"built_in\">clone</span> https://github.com/pwndbg/pwndbg;<span class=\"built_in\">cd</span> pwndbg;./setup.sh;<span class=\"built_in\">echo</span> <span class=\"string\">&quot;source /ctfpwntools/pwndbg/gdbinit.py&quot;</span> &gt;&gt; ~/.gdbinit;<span class=\"built_in\">cd</span> ..); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装pwndbg时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装pwndbg失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装glibc-all-in-one</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (git <span class=\"built_in\">clone</span> https://github.com/matrix1001/glibc-all-in-one.git;<span class=\"built_in\">cd</span> glibc-all-in-one/;python3 update_list;<span class=\"built_in\">cd</span> ..); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装glibc-all-in-one时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装glibc-all-in-one失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 安装ROPgadget</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (pip install capstone;git <span class=\"built_in\">clone</span> https://github.com/JonathanSalwan/ROPgadget.git;<span class=\"built_in\">cd</span> ROPgadget;sudo python3 setup.py install;<span class=\"built_in\">cd</span> ..); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装ROPgadget时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装ROPgadget失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># one_gadget</span></span><br><span class=\"line\"><span class=\"comment\"># 32位libc</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (apt -y install ruby;gem install one_gadget;dpkg --add-architecture i386;apt-get -y install libc6:i386 libgtk2.0-0:i386); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装one_gadget时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装one_gadget失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># LibcSearcher</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (git <span class=\"built_in\">clone</span> https://github.com/lieanu/LibcSearcher.git;<span class=\"built_in\">cd</span> LibcSearcher;python3 setup.py develop;<span class=\"built_in\">cd</span> ..); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装LibcSearcher时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装LibcSearcher失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># patchelf</span></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (apt-get install autoconf automake libtool;git <span class=\"built_in\">clone</span> https://github.com/NixOS/patchelf.git;<span class=\"built_in\">cd</span> patchelf;./bootstrap.sh;./configure;make;make check;make install;<span class=\"built_in\">cd</span> ..); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装patchelf时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装patchelf失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">##  seccomp //安装失败</span></span><br><span class=\"line\"><span class=\"comment\">## ruby版本会和上面那个onegadget冲突吗??</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> (( i=1; i&lt;=<span class=\"variable\">$MAX_RETRY</span>; i++ )); <span class=\"keyword\">do</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (add-apt-repository ppa:brightbox/ruby-ng;apt-get install ruby2.6 ruby2.6-dev ;gem install seccomp-tools); <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">break</span></span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$i</span> -eq <span class=\"variable\">$MAX_RETRY</span> ]; <span class=\"keyword\">then</span></span><br><span class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装seccomp时出现错误&quot;</span></span><br><span class=\"line\">    <span class=\"built_in\">exit</span> 1</span><br><span class=\"line\">  <span class=\"keyword\">fi</span></span><br><span class=\"line\">  <span class=\"built_in\">echo</span> <span class=\"string\">&quot;安装seccomp失败，正在进行第<span class=\"variable\">$i</span>次重试...&quot;</span></span><br><span class=\"line\">  <span class=\"built_in\">sleep</span> 1</span><br><span class=\"line\"><span class=\"keyword\">done</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n\n\n<h2 id=\"问题\"><a href=\"#问题\" class=\"headerlink\" title=\"问题\"></a>问题</h2><p>pip还是pip3呢</p>\n<p>还有一些小问题、以及还有其他有用工具没安装</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p><a href=\"https://blog.csdn.net/mandiheyanyu/article/details/122455348\">https://blog.csdn.net/mandiheyanyu/article/details/122455348</a></p>\n<p>安装工具参考: <a href=\"https://blingblingxuanxuan.github.io/2020/02/23/paper/\">https://blingblingxuanxuan.github.io/2020/02/23/paper/</a></p>\n",
            "tags": [
                "PWN入门",
                "脚本"
            ]
        }
    ]
}